{% extends "base_layout.html" %}

{% block content %}
    {% if todo_data_list|length > 0 %}
        {% for data in todo_data_list %}
            <div>
                <header>
                    {% if loop.index == 1 %}
                    <p>ToDay</p>
                    {% elseif loop.index == 2 %}
                    <p>Tomorrow</p>
                    {% endif %}
                    <p>{{data.date|date("Y/m/d")}}</p>
                </header>
                <div>
                    {% for project_data in data.project_todo_data %}
                    <article>
                        <h2>{{project_data.project_data.name}}</h2>
                        <ul>
                            {% for todo_data in project_data.todo_data %}
                            <li>
                                <form action="{{url.do_check}}" method="post">
                                    {% if todo_data.is_done == "DONE" %}
                                    {% set submit_value = "未完了にする" %}
                                    {% set change_to = "undone" %}
                                    {% else %}
                                    {% set submit_value = "完了にする" %}
                                    {% set change_to = "done" %}
                                    {% endif %}
                                    <input type="submit" value="{{submit_value}}">
                                    <input type="hidden" name="todo_id" value="{{todo_data.id}}">
                                    <input type="hidden" name="change_to" value="{{change_to}}">
                                    <input type="hidden" name="redirect_url" value="{{url.check_redirect}}">
                                </form>
                                {{todo_data.title}}
                            </li>
                            {% endfor %}
                        </ul>
                    </article>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    {% else %}
    <p>todoはありません</p>
    {% endif %}
{% endblock %}
